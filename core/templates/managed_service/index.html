{% extends "base.html" %}
{% load static %}
{% load custom_filters %}

{% block title %}Managed Services | OB Global{% endblock %}

{% block content %}
<div class="service-page-container">
    <!-- Hero Section - Full Screen -->
    <section class="service-hero">
        <div class="hero-background"></div>
        {% include "components/regional_leaders.html" %}
        <div class="hero-content">
            <h1 class="hero-title" style="
    font-size: 4.5rem;
    margin-bottom: 25px;
    font-weight: 900;
    line-height: 1.1;
    text-shadow: 
        2px 2px 4px rgba(0,0,0,0.3),
        0 0 30px rgba(255,255,255,0.2),
        0 0 60px rgba(255,255,255,0.1);
    animation: fadeInUp 1s ease-out;
    background: linear-gradient(135deg, #ffffff 0%, #f0f8ff 100%);
    -webkit-background-clip: text;
    background-clip: text;
    -webkit-text-fill-color: transparent;
    letter-spacing: -0.5px;
    position: relative;
    display: inline-block;
">
    Managed <span style="
        background: linear-gradient(135deg, #667eea, #764ba2);
        -webkit-background-clip: text;
        background-clip: text;
        -webkit-text-fill-color: transparent;
        font-weight: 800;
        text-shadow: none;
    ">Services</span>
</h1>

<p class="hero-description" style="
    font-size: 1.5rem;
    margin: 0 auto;
    line-height: 1.8;
    opacity: 0.95;
    text-shadow: 2px 2px 8px rgba(0,0,0,0.4);
    animation: fadeInUp 1s ease-out 0.3s both;
    background: linear-gradient(135deg, rgba(255,255,255,0.95) 0%, rgba(240,248,255,0.9) 100%);
    -webkit-background-clip: text;
    background-clip: text;
    -webkit-text-fill-color: transparent;
    font-weight: 500;
    max-width: 700px;
    padding: 20px 0;
    position: relative;
    letter-spacing: 0.2px;
">
    Comprehensive end-to-end business support solutions designed to streamline your operations, 
    reduce costs, and drive sustainable growth through our expert managed services.
</p>
        </div>
    </section>

    <section class="staff-section" style="padding: 80px 0; background: linear-gradient(135deg, #f8f9fa 0%, #e9ecef 100%); width: 100%;">

    <div class="container" style="max-width: 1400px; margin: 0 auto; padding: 0 20px;">

        <h2 class="section-title" style="text-align: center; font-size: 2.8rem; margin-bottom: 50px; color: #333; font-weight: 800;">The Team</h2>

        <div class="staff-grid" style="display: grid; grid-template-columns: repeat(4, 1fr); gap: 30px; margin-bottom: 40px; max-width: 1400px; margin-left: auto; margin-right: auto; padding: 0 20px;">

            {% for staff in managed_service_staff %}

            <div class="staff-card" style="background: white; border-radius: 20px; overflow: hidden; box-shadow: 0 10px 30px rgba(0,0,0,0.15); transition: all 0.4s ease; position: relative; border: none;">

                <div class="staff-image-container" style="position: relative; height: 220px; overflow: hidden; background: linear-gradient(135deg, #667eea, #764ba2);">

                    {% if staff.profile_image %}

                    <img src="{{ staff.profile_image|replace:'/upload/,/upload/q_auto,f_auto/' }}"

                         alt="{{ staff.first_name }} {{ staff.last_name }}"

                         class="staff-image"

                         data-staff-id="{{ staff.id }}"

                         onerror="handleImageError(this)"

                         style="width: 100%; height: 100%; object-fit: cover; transition: all 0.4s ease;">

                    {% else %}

                    <div class="staff-placeholder" style="width: 100%; height: 100%; background: linear-gradient(135deg, #667eea, #764ba2); display: flex; align-items: center; justify-content: center; font-size: 3.5rem; color: rgba(255, 255, 255, 0.9);">

                        <i class="fas fa-user"></i>

                    </div>

                    {% endif %}

                    <div class="staff-overlay" style="position: absolute; top: 0; left: 0; right: 0; bottom: 0; background: linear-gradient(to bottom, transparent 40%, rgba(0,0,0,0.8)); display: flex; align-items: flex-end; justify-content: center; opacity: 0; transition: all 0.3s ease; padding: 20px;">

                        <div class="staff-social" style="display: flex; gap: 10px; transform: translateY(20px); transition: transform 0.3s ease;">

                            {% if staff.linkedin %}

                            <a href="{{ staff.linkedin }}" target="_blank" class="social-link linkedin" style="width: 40px; height: 40px; background: rgba(255, 255, 255, 0.95); border-radius: 50%; display: flex; align-items: center; justify-content: center; color: #333; text-decoration: none; transition: all 0.3s ease; backdrop-filter: blur(10px); font-size: 1rem; box-shadow: 0 4px 15px rgba(0,0,0,0.2);">

                                <i class="fab fa-linkedin-in"></i>

                            </a>

                            {% endif %}

                            <a href="mailto:{{ staff.email }}" class="social-link email" style="width: 40px; height: 40px; background: rgba(255, 255, 255, 0.95); border-radius: 50%; display: flex; align-items: center; justify-content: center; color: #333; text-decoration: none; transition: all 0.3s ease; backdrop-filter: blur(10px); font-size: 1rem; box-shadow: 0 4px 15px rgba(0,0,0,0.2);">

                                <i class="fas fa-envelope"></i>

                            </a>

                        </div>

                    </div>

                </div>

                <div class="staff-info" style="padding: 25px; text-align: center; background: white;">

                    <h3 class="staff-name" style="font-size: 1.2rem; font-weight: 700; margin-bottom: 8px; color: #333; line-height: 1.3; word-break: break-word;">{{ staff.first_name }} {{ staff.last_name }}</h3>

                    <p class="staff-position" style="color: #007bff; font-weight: 600; margin-bottom: 10px; font-size: 0.95rem; word-break: break-word;">üéØ {{ staff.field_position|default:"Tax Specialist" }}</p>

                    {% if staff.office %}

                    <p class="staff-office" style="color: #666; font-size: 0.85rem; margin-bottom: 20px; display: flex; align-items: center; justify-content: center; gap: 8px; word-break: break-word;">

                        <i class="fas fa-map-marker-alt"></i>

                        üìç {{ staff.office.office_location }}

                    </p>

                    {% endif %}

                    <button class="btn-view-more" onclick="openStaffModal({{ staff.id }})" style="background: linear-gradient(135deg, #007bff, #0056b3); color: white; border: none; padding: 12px 24px; border-radius: 25px; font-weight: 600; cursor: pointer; transition: all 0.3s ease; display: inline-flex; align-items: center; gap: 8px; text-decoration: none; font-size: 0.9rem; min-width: 140px; justify-content: center; box-shadow: 0 4px 15px rgba(0,123,255,0.3);">

                        <span>View Profile</span>

                        <i class="fas fa-arrow-right"></i>

                    </button>

                </div>

            </div>

            {% empty %}

            <div class="no-staff" style="grid-column: 1 / -1; text-align: center; padding: 60px 20px; color: #666;">

                <i class="fas fa-users fa-3x" style="margin-bottom: 20px; color: #ccc;"></i>

                <p style="font-size: 1.1rem; margin: 0;">No tax staff members found.</p>

            </div>

            {% endfor %}

        </div>

    </div>

</section>






<style>

/* Modal Styles - Override existing styles */

.modal-content {

    max-width: 900px !important;

    width: 90% !important;

    margin: 2% auto !important;

    padding: 40px !important;

    background: #333; /* Dark background for a sleek look */

    color: white;

    border-radius: 20px;

    box-shadow: 0 10px 40px rgba(0,0,0,0.5);

}



.staff-modal-content {

    display: flex;

    flex-direction: column;

    align-items: center;

    text-align: center;

}



.staff-modal-image,

.staff-modal-placeholder {

    width: 120px !important;

    height: 120px !important;

    border-radius: 50% !important;

    object-fit: cover !important;

    margin-bottom: 20px !important;

    border: 5px solid #007bff;

}



.staff-modal-placeholder {

    background: #0056b3;

    display: flex;

    align-items: center;

    justify-content: center;

    font-size: 3rem;

    color: white;

}



.staff-modal-name {

    font-size: 2rem !important;

    font-weight: 800 !important;

    margin-bottom: 5px !important;

}



.staff-modal-position {

    font-size: 1.1rem !important;

    color: #007bff !important;

    font-weight: 600 !important;

    margin-bottom: 30px !important;

}



/* New Structure for Details */

.staff-modal-details {

    display: grid !important;

    grid-template-columns: 1fr 1fr !important; /* Two equal columns */

    gap: 20px 30px !important;

    margin-top: 30px !important;

    width: 100%;

}



.detail-row {

    display: flex !important;

    flex-direction: column !important;

    border-bottom: none !important;

    padding-bottom: 0 !important;

    gap: 5px !important;

    background: rgba(255, 255, 255, 0.05);

    padding: 15px;

    border-radius: 10px;

}



.detail-label {

    font-size: 0.85rem !important;

    color: #007bff !important; /* Blue label for emphasis */

    font-weight: 700 !important;

    text-transform: uppercase;

}



.detail-value {

    text-align: left !important;

    font-size: 1rem !important;

    line-height: 1.4 !important;

    color: white !important;

    font-weight: 500 !important;

    word-break: break-word;

}



.detail-value a {

    color: #00c6ff;

    text-decoration: none;

    font-weight: 600;

}



/* Specific styling for larger text areas (spanning full width) */

.full-width-detail {

    grid-column: 1 / -1 !important;

}



.full-width-detail .detail-value {

    background: rgba(255, 255, 255, 0.1);

    padding: 10px;

    border-radius: 5px;

    border: 1px solid rgba(255, 255, 255, 0.15);

}



/* Mobile Responsiveness */

@media (max-width: 768px) {

    .modal-content {

        padding: 25px !important;

    }



    .staff-modal-details {

        grid-template-columns: 1fr !important; /* Single column on mobile */

        gap: 15px !important;

    }



    .full-width-detail {

        grid-column: auto !important;

    }

}



@media (max-width: 480px) {

    .modal-content {

        padding: 20px !important;

        margin: 10% auto !important;

    }



    .detail-value {

        font-size: 0.9rem !important;

    }



    .detail-label {

        font-size: 0.85rem !important;

    }

}

</style>


<script>

function displayStaffModal(data) {

    const modalContent = document.getElementById('modalContent');



    // Get the actual image URL from the card if available

    const staffCard = document.querySelector(`.staff-image[data-staff-id="${data.id}"]`);

    let profileImageUrl = data.profile_image;



    // If we have a card with the image, use that URL (it's already optimized)

    if (staffCard && staffCard.src && !staffCard.src.includes('team-placeholder')) {

        profileImageUrl = staffCard.src;

    } else if (data.profile_image) {

        // Apply the same Cloudinary optimization as in the template

        profileImageUrl = data.profile_image.replace('/upload/', '/upload/q_auto,f_auto/');

    }



    modalContent.innerHTML = `

        <div class="staff-modal-content">

            ${profileImageUrl ?

                `<img src="${profileImageUrl}"

                      alt="${data.first_name} ${data.last_name}"

                      class="staff-modal-image"

                      onerror="this.onerror=null; this.src='{% static 'images/team-placeholder.jpg' %}'">` :

                `<div class="staff-modal-placeholder"><i class="fas fa-user-circle"></i></div>`

            }

            <h3 class="staff-modal-name">${data.first_name} ${data.last_name}</h3>

            <p class="staff-modal-position">üéØ ${data.field_position || 'Tax Specialist'}</p>



            <div class="staff-modal-details">

                <div class="detail-row">

                    <span class="detail-label"><i class="fas fa-at"></i> Email</span>

                    <span class="detail-value">${data.email}</span>

                </div>

                ${data.office_location ? `

                <div class="detail-row">

                    <span class="detail-label"><i class="fas fa-building"></i> Office</span>

                    <span class="detail-value">${data.office_location}</span>

                </div>` : ''}

                ${data.nationality ? `

                <div class="detail-row">

                    <span class="detail-label"><i class="fas fa-globe-americas"></i> Nationality</span>

                    <span class="detail-value">${data.nationality}</span>

                </div>` : ''}

                ${data.linkedin ? `

                <div class="detail-row">

                    <span class="detail-label"><i class="fab fa-linkedin"></i> LinkedIn</span>

                    <span class="detail-value"><a href="${data.linkedin}" target="_blank">View Profile</a></span>

                </div>` : ''}

                ${data.field_position ? `

                <div class="detail-row full-width-detail">

                    <span class="detail-label"><i class="fas fa-briefcase"></i> Field Position / Specialization</span>

                    <span class="detail-value">${data.field_position}</span>

                </div>` : ''}

                ${data.executive_position_description ? `

                <div class="detail-row full-width-detail">

                    <span class="detail-label"><i class="fas fa-crown"></i> Executive Role Description</span>

                    <span class="detail-value">${data.executive_position_description}</span>

                </div>` : ''}

                ${data.company_impact ? `

                <div class="detail-row full-width-detail">

                    <span class="detail-label"><i class="fas fa-chart-line"></i> Company Impact</span>

                    <span class="detail-value">${data.company_impact}</span>

                </div>` : ''}

                ${data.office_impact ? `

                <div class="detail-row full-width-detail">

                    <span class="detail-label"><i class="fas fa-users-cog"></i> Office Impact</span>

                    <span class="detail-value">${data.office_impact}</span>

                </div>` : ''}

                ${data.address ? `

                <div class="detail-row full-width-detail">

                    <span class="detail-label"><i class="fas fa-map-marked-alt"></i> Address</span>

                    <span class="detail-value">${data.address}</span>

                </div>` : ''}

            </div>

        </div>

    `;



    // Add escape key listener

    document.addEventListener('keydown', handleEscapeKey);

}

</script>



    <!-- Service Overview -->
    <section class="service-overview">
        <div class="container">
            <div class="overview-content">
                <h2 class="section-title">üöÄ Comprehensive Managed Services Solutions</h2>
                <p class="overview-text">
                    Our managed services provide comprehensive, end-to-end business support that allows you to 
                    focus on your core operations while we handle the complexities of accounting, tax compliance, 
                    and technology infrastructure. With our expert team and proven methodologies, we deliver 
                    reliable, scalable solutions that drive efficiency and growth.
                </p>
                
                <div class="service-highlights">
                    <div class="highlight-item" style="background: linear-gradient(135deg, #ff6b6b, #ee5a52);">
                        <div class="highlight-icon">
                            <i class="fas fa-chart-line"></i>
                        </div>
                        <h4>üìà Accounting Excellence</h4>
                        <p>Full-cycle accounting support and financial management</p>
                    </div>
                    <div class="highlight-item" style="background: linear-gradient(135deg, #4ecdc4, #44a08d);">
                        <div class="highlight-icon">
                            <i class="fas fa-file-invoice-dollar"></i>
                        </div>
                        <h4>üìã Tax Compliance</h4>
                        <p>Comprehensive tax management and compliance services</p>
                    </div>
                    <div class="highlight-item" style="background: linear-gradient(135deg, #45b7d1, #96c93d);">
                        <div class="highlight-icon">
                            <i class="fas fa-laptop-code"></i>
                        </div>
                        <h4>üíª Technology Solutions</h4>
                        <p>Complete IT infrastructure and support management</p>
                    </div>
                </div>
            </div>
        </div>
    </section>

<!-- Service Categories - FIXED VERSION -->
<section class="service-categories" style="padding: 60px 0; background: linear-gradient(135deg, #f8f9fa 0%, #e9ecef 100%); width: 100%; position: relative; min-height: auto !important;">
    <div class="container" style="max-width: 1400px; margin: 0 auto; padding: 0 20px;">
        <h2 class="section-title" style="text-align: center; font-size: 2.8rem; margin-bottom: 40px; color: #333; font-weight: 800; line-height: 1.2; word-spacing: 0px; letter-spacing: 0px; padding: 0;">Our Managed Service Offerings</h2>
        
        <div class="categories-container" style="display: flex; gap: 30px; align-items: stretch; justify-content: center; flex-wrap: wrap; width: 100%;">
            <!-- Accounting Services Card - FIXED -->
            <div class="category-card accounting-card" style="flex: 1; min-width: 320px; max-width: 600px; background: linear-gradient(135deg, #667eea, #764ba2); color: white; padding: 35px 30px; border-radius: 20px; box-shadow: 0 10px 30px rgba(0,0,0,0.15); transition: all 0.4s ease; border: none; position: relative; overflow: hidden; display: flex; flex-direction: column; height: auto !important; align-items: center; text-align: center;">
                <div class="card-header" style="text-align: center; margin-bottom: 25px; width: 100%;">
                    <div class="category-icon" style="font-size: 3rem; color: rgba(255, 255, 255, 0.9); margin-bottom: 15px; text-shadow: 2px 2px 4px rgba(0,0,0,0.3);">
                       <span style="font-size: 3rem; margin-bottom: 15px; display: block;">üìä</span>
                    </div>
                    <h3 class="category-title" style="font-size: 1.6rem; margin: 0; color: white; font-weight: 700; text-shadow: 2px 2px 4px rgba(0,0,0,0.3); line-height: 1.3; word-spacing: 0px; letter-spacing: 0px; width: 100%;">Accounting Services</h3>
                </div>
                
                <p class="category-description" style="color: rgba(255, 255, 255, 0.9); line-height: 1.5; margin-bottom: 25px; font-size: 1rem; text-align: center; word-spacing: 0px; letter-spacing: 0px; width: 100%;">
                    Comprehensive accounting solutions to maintain financial integrity, ensure compliance, and support strategic decision-making.
                </p>
                
                <div class="category-links" style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 10px; margin-top: auto; width: 100%;">
                    <a href="{% url 'account_management_bookkeeping_ms' %}" class="category-link" style="color: white; text-decoration: none; padding: 12px 15px; border-radius: 8px; transition: all 0.3s ease; border: 1.5px solid rgba(255, 255, 255, 0.3); font-weight: 500; font-size: 0.9rem; text-align: center; background: rgba(255, 255, 255, 0.1); word-spacing: 0px; letter-spacing: 0px; backdrop-filter: blur(5px); display: flex; align-items: center; justify-content: center;">Account Management/Bookkeeping</a>
                    <a href="{% url 'financial_statement_preparation' %}" class="category-link" style="color: white; text-decoration: none; padding: 12px 15px; border-radius: 8px; transition: all 0.3s ease; border: 1.5px solid rgba(255, 255, 255, 0.3); font-weight: 500; font-size: 0.9rem; text-align: center; background: rgba(255, 255, 255, 0.1); word-spacing: 0px; letter-spacing: 0px; backdrop-filter: blur(5px); display: flex; align-items: center; justify-content: center;">Financial Statement Preparation</a>
                    <a href="{% url 'bank_reconciliation' %}" class="category-link" style="color: white; text-decoration: none; padding: 12px 15px; border-radius: 8px; transition: all 0.3s ease; border: 1.5px solid rgba(255, 255, 255, 0.3); font-weight: 500; font-size: 0.9rem; text-align: center; background: rgba(255, 255, 255, 0.1); word-spacing: 0px; letter-spacing: 0px; backdrop-filter: blur(5px); display: flex; align-items: center; justify-content: center;">Bank Reconciliation</a>
                    <a href="{% url 'account_payable_receivable' %}" class="category-link" style="color: white; text-decoration: none; padding: 12px 15px; border-radius: 8px; transition: all 0.3s ease; border: 1.5px solid rgba(255, 255, 255, 0.3); font-weight: 500; font-size: 0.9rem; text-align: center; background: rgba(255, 255, 255, 0.1); word-spacing: 0px; letter-spacing: 0px; backdrop-filter: blur(5px); display: flex; align-items: center; justify-content: center;">Account Payable/Receivable</a>
                    <a href="{% url 'budget_and_forecasting' %}" class="category-link" style="color: white; text-decoration: none; padding: 12px 15px; border-radius: 8px; transition: all 0.3s ease; border: 1.5px solid rgba(255, 255, 255, 0.3); font-weight: 500; font-size: 0.9rem; text-align: center; background: rgba(255, 255, 255, 0.1); word-spacing: 0px; letter-spacing: 0px; backdrop-filter: blur(5px); display: flex; align-items: center; justify-content: center;">Budget and Forecasting</a>
                    <a href="{% url 'forensic_accounting_ms' %}" class="category-link" style="color: white; text-decoration: none; padding: 12px 15px; border-radius: 8px; transition: all 0.3s ease; border: 1.5px solid rgba(255, 255, 255, 0.3); font-weight: 500; font-size: 0.9rem; text-align: center; background: rgba(255, 255, 255, 0.1); word-spacing: 0px; letter-spacing: 0px; backdrop-filter: blur(5px); display: flex; align-items: center; justify-content: center;">Forensic Accounting</a>
                    <a href="{% url 'business_consulting_ms' %}" class="category-link" style="color: white; text-decoration: none; padding: 12px 15px; border-radius: 8px; transition: all 0.3s ease; border: 1.5px solid rgba(255, 255, 255, 0.3); font-weight: 500; font-size: 0.9rem; text-align: center; background: rgba(255, 255, 255, 0.1); word-spacing: 0px; letter-spacing: 0px; backdrop-filter: blur(5px); display: flex; align-items: center; justify-content: center;">Business Consulting</a>
                    <a href="{% url 'public_accounting' %}" class="category-link" style="color: white; text-decoration: none; padding: 12px 15px; border-radius: 8px; transition: all 0.3s ease; border: 1.5px solid rgba(255, 255, 255, 0.3); font-weight: 500; font-size: 0.9rem; text-align: center; background: rgba(255, 255, 255, 0.1); word-spacing: 0px; letter-spacing: 0px; backdrop-filter: blur(5px); display: flex; align-items: center; justify-content: center;">Public Accounting</a>
                </div>
                
                <div class="hover-overlay" style="position: absolute; top: 0; left: 0; width: 100%; height: 100%; background: linear-gradient(45deg, rgba(255,255,255,0.1), rgba(255,255,255,0.05)); opacity: 0; transition: opacity 0.3s ease; pointer-events: none;"></div>
            </div>
            
            <!-- Tax Services Card - FIXED -->
            <div class="category-card tax-card" style="flex: 1; min-width: 320px; max-width: 600px; background: linear-gradient(135deg, #f093fb, #f5576c); color: white; padding: 35px 30px; border-radius: 20px; box-shadow: 0 10px 30px rgba(0,0,0,0.15); transition: all 0.4s ease; border: none; position: relative; overflow: hidden; display: flex; flex-direction: column; height: auto !important; align-items: center; text-align: center;">
                <div class="card-header" style="text-align: center; margin-bottom: 25px; width: 100%;">
                    <div class="category-icon" style="font-size: 3rem; color: rgba(255, 255, 255, 0.9); margin-bottom: 15px; text-shadow: 2px 2px 4px rgba(0,0,0,0.3);">
                        <span style="font-size: 3rem; margin-bottom: 15px; display: block;">üí∞</span>
                    </div>
                    <h3 class="category-title" style="font-size: 1.6rem; margin: 0; color: white; font-weight: 700; text-shadow: 2px 2px 4px rgba(0,0,0,0.3); line-height: 1.3; word-spacing: 0px; letter-spacing: 0px; width: 100%;">Tax Services</h3>
                </div>
                
                <p class="category-description" style="color: rgba(255, 255, 255, 0.9); line-height: 1.5; margin-bottom: 25px; font-size: 1rem; text-align: center; word-spacing: 0px; letter-spacing: 0px; width: 100%;">
                    Expert tax planning, compliance, and advisory services to optimize your tax position and ensure regulatory compliance.
                </p>
                
                <div class="category-links" style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 10px; margin-top: auto; width: 100%;">
                    <a href="{% url 'tax_planning_ms' %}" class="category-link" style="color: white; text-decoration: none; padding: 12px 15px; border-radius: 8px; transition: all 0.3s ease; border: 1.5px solid rgba(255, 255, 255, 0.3); font-weight: 500; font-size: 0.9rem; text-align: center; background: rgba(255, 255, 255, 0.1); word-spacing: 0px; letter-spacing: 0px; backdrop-filter: blur(5px); display: flex; align-items: center; justify-content: center;">Tax Planning</a>
                    <a href="{% url 'payroll_tax' %}" class="category-link" style="color: white; text-decoration: none; padding: 12px 15px; border-radius: 8px; transition: all 0.3s ease; border: 1.5px solid rgba(255, 255, 255, 0.3); font-weight: 500; font-size: 0.9rem; text-align: center; background: rgba(255, 255, 255, 0.1); word-spacing: 0px; letter-spacing: 0px; backdrop-filter: blur(5px); display: flex; align-items: center; justify-content: center;">Payroll Tax</a>
                    <a href="{% url 'individual_tax_1040' %}" class="category-link" style="color: white; text-decoration: none; padding: 12px 15px; border-radius: 8px; transition: all 0.3s ease; border: 1.5px solid rgba(255, 255, 255, 0.3); font-weight: 500; font-size: 0.9rem; text-align: center; background: rgba(255, 255, 255, 0.1); word-spacing: 0px; letter-spacing: 0px; backdrop-filter: blur(5px); display: flex; align-items: center; justify-content: center;">Individual Tax - 1040</a>
                    <a href="{% url 'business_tax_1120s_1120' %}" class="category-link" style="color: white; text-decoration: none; padding: 12px 15px; border-radius: 8px; transition: all 0.3s ease; border: 1.5px solid rgba(255, 255, 255, 0.3); font-weight: 500; font-size: 0.9rem; text-align: center; background: rgba(255, 255, 255, 0.1); word-spacing: 0px; letter-spacing: 0px; backdrop-filter: blur(5px); display: flex; align-items: center; justify-content: center;">Business Tax ‚Äì 1120s and 1120</a>
                    <a href="{% url 'nonprofit_tax_990' %}" class="category-link" style="color: white; text-decoration: none; padding: 12px 15px; border-radius: 8px; transition: all 0.3s ease; border: 1.5px solid rgba(255, 255, 255, 0.3); font-weight: 500; font-size: 0.9rem; text-align: center; background: rgba(255, 255, 255, 0.1); word-spacing: 0px; letter-spacing: 0px; backdrop-filter: blur(5px); display: flex; align-items: center; justify-content: center;">Non-profit Tax ‚Äì 990</a>
                    <a href="{% url 'tax_accounting' %}" class="category-link" style="color: white; text-decoration: none; padding: 12px 15px; border-radius: 8px; transition: all 0.3s ease; border: 1.5px solid rgba(255, 255, 255, 0.3); font-weight: 500; font-size: 0.9rem; text-align: center; background: rgba(255, 255, 255, 0.1); word-spacing: 0px; letter-spacing: 0px; backdrop-filter: blur(5px); display: flex; align-items: center; justify-content: center;">Tax Accounting</a>
                    <a href="{% url 'international_tax' %}" class="category-link" style="color: white; text-decoration: none; padding: 12px 15px; border-radius: 8px; transition: all 0.3s ease; border: 1.5px solid rgba(255, 255, 255, 0.3); font-weight: 500; font-size: 0.9rem; text-align: center; background: rgba(255, 255, 255, 0.1); word-spacing: 0px; letter-spacing: 0px; backdrop-filter: blur(5px); display: flex; align-items: center; justify-content: center;">International Tax</a>
                </div>
                
                <div class="hover-overlay" style="position: absolute; top: 0; left: 0; width: 100%; height: 100%; background: linear-gradient(45deg, rgba(255,255,255,0.1), rgba(255,255,255,0.05)); opacity: 0; transition: opacity 0.3s ease; pointer-events: none;"></div>
            </div>

            <!-- Technology Services Card - FIXED -->
            <div class="category-card tech-card" style="flex: 1; min-width: 320px; max-width: 600px; background: linear-gradient(135deg, #4ecdc4, #44a08d); color: white; padding: 35px 30px; border-radius: 20px; box-shadow: 0 10px 30px rgba(0,0,0,0.15); transition: all 0.4s ease; border: none; position: relative; overflow: hidden; display: flex; flex-direction: column; height: auto !important; align-items: center; text-align: center;">
                <div class="card-header" style="text-align: center; margin-bottom: 25px; width: 100%;">
                    <div class="category-icon" style="font-size: 3rem; color: rgba(255, 255, 255, 0.9); margin-bottom: 15px; text-shadow: 2px 2px 4px rgba(0,0,0,0.3);">
                        <span style="font-size: 3rem; margin-bottom: 15px; display: block;">üíª</span>
                    </div>
                    <h3 class="category-title" style="font-size: 1.6rem; margin: 0; color: white; font-weight: 700; text-shadow: 2px 2px 4px rgba(0,0,0,0.3); line-height: 1.3; word-spacing: 0px; letter-spacing: 0px; width: 100%;">Technology Services</h3>
                </div>
                
                <p class="category-description" style="color: rgba(255, 255, 255, 0.9); line-height: 1.5; margin-bottom: 25px; font-size: 1rem; text-align: center; word-spacing: 0px; letter-spacing: 0px; width: 100%;">
                    Complete IT infrastructure management, cybersecurity, and technology support to keep your business running smoothly.
                </p>
                
                <div class="category-links" style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 10px; margin-top: auto; width: 100%;">
                    <a href="{% url 'asset_tracking_management' %}" class="category-link" style="color: white; text-decoration: none; padding: 12px 15px; border-radius: 8px; transition: all 0.3s ease; border: 1.5px solid rgba(255, 255, 255, 0.3); font-weight: 500; font-size: 0.9rem; text-align: center; background: rgba(255, 255, 255, 0.1); word-spacing: 0px; letter-spacing: 0px; backdrop-filter: blur(5px); display: flex; align-items: center; justify-content: center;">Asset Tracking and Management</a>
                    <a href="{% url 'it_support_management' %}" class="category-link" style="color: white; text-decoration: none; padding: 12px 15px; border-radius: 8px; transition: all 0.3s ease; border: 1.5px solid rgba(255, 255, 255, 0.3); font-weight: 500; font-size: 0.9rem; text-align: center; background: rgba(255, 255, 255, 0.1); word-spacing: 0px; letter-spacing: 0px; backdrop-filter: blur(5px); display: flex; align-items: center; justify-content: center;">IT Support Management</a>
                    <a href="{% url 'cybersecurity_ms' %}" class="category-link" style="color: white; text-decoration: none; padding: 12px 15px; border-radius: 8px; transition: all 0.3s ease; border: 1.5px solid rgba(255, 255, 255, 0.3); font-weight: 500; font-size: 0.9rem; text-align: center; background: rgba(255, 255, 255, 0.1); word-spacing: 0px; letter-spacing: 0px; backdrop-filter: blur(5px); display: flex; align-items: center; justify-content: center;">Cybersecurity</a>
                    <a href="{% url 'network_support_health_check' %}" class="category-link" style="color: white; text-decoration: none; padding: 12px 15px; border-radius: 8px; transition: all 0.3s ease; border: 1.5px solid rgba(255, 255, 255, 0.3); font-weight: 500; font-size: 0.9rem; text-align: center; background: rgba(255, 255, 255, 0.1); word-spacing: 0px; letter-spacing: 0px; backdrop-filter: blur(5px); display: flex; align-items: center; justify-content: center;">Network Support/Health Check</a>
                    <a href="{% url 'inventory' %}" class="category-link" style="color: white; text-decoration: none; padding: 12px 15px; border-radius: 8px; transition: all 0.3s ease; border: 1.5px solid rgba(255, 255, 255, 0.3); font-weight: 500; font-size: 0.9rem; text-align: center; background: rgba(255, 255, 255, 0.1); word-spacing: 0px; letter-spacing: 0px; backdrop-filter: blur(5px); display: flex; align-items: center; justify-content: center;">Inventory</a>
                </div>
                
                <div class="hover-overlay" style="position: absolute; top: 0; left: 0; width: 100%; height: 100%; background: linear-gradient(45deg, rgba(255,255,255,0.1), rgba(255,255,255,0.05)); opacity: 0; transition: opacity 0.3s ease; pointer-events: none;"></div>
            </div>
        </div>
    </div>
</section>

<style>
/* RESET AND OVERRIDE ALL EXISTING STYLES FOR SERVICE CATEGORIES */
.service-categories,
.service-categories *,
.service-categories *::before,
.service-categories *::after {
    box-sizing: border-box !important;
    margin: 0 !important;
    padding: 0 !important;
    font-family: inherit !important;
    line-height: normal !important;
}

/* Force container alignment */
.service-categories .container {
    max-width: 1400px !important;
    margin: 0 auto !important;
    padding: 0 20px !important;
    display: block !important;
}

/* Force section title alignment */
.service-categories .section-title {
    text-align: center !important;
    font-size: 2.8rem !important;
    margin-bottom: 40px !important;
    color: #333 !important;
    font-weight: 800 !important;
    line-height: 1.2 !important;
    word-spacing: 0px !important;
    letter-spacing: 0px !important;
    padding: 0 !important;
    width: 100% !important;
    display: block !important;
}

/* Force categories container alignment */
.service-categories .categories-container {
    display: flex !important;
    gap: 30px !important;
    align-items: stretch !important;
    justify-content: center !important;
    flex-wrap: wrap !important;
    width: 100% !important;
}

/* Force category card alignment */
.service-categories .category-card {
    flex: 1 !important;
    min-width: 320px !important;
    max-width: 600px !important;
    padding: 35px 30px !important;
    border-radius: 20px !important;
    box-shadow: 0 10px 30px rgba(0,0,0,0.15) !important;
    transition: all 0.4s ease !important;
    border: none !important;
    position: relative !important;
    overflow: hidden !important;
    display: flex !important;
    flex-direction: column !important;
    height: auto !important;
    align-items: center !important;
    text-align: center !important;
    min-height: 500px !important;
}

/* Force accounting card styling */
.service-categories .accounting-card {
    background: linear-gradient(135deg, #667eea, #764ba2) !important;
    color: white !important;
}

/* Force tax card styling */
.service-categories .tax-card {
    background: linear-gradient(135deg, #f093fb, #f5576c) !important;
    color: white !important;
}

/* Force tech card styling */
.service-categories .tech-card {
    background: linear-gradient(135deg, #4ecdc4, #44a08d) !important;
    color: white !important;
}

/* Force card header alignment */
.service-categories .card-header {
    text-align: center !important;
    margin-bottom: 25px !important;
    width: 100% !important;
}

/* Force category icon alignment */
.service-categories .category-icon {
    font-size: 3rem !important;
    color: rgba(255, 255, 255, 0.9) !important;
    margin-bottom: 15px !important;
    text-shadow: 2px 2px 4px rgba(0,0,0,0.3) !important;
    display: block !important;
}

/* Force category title alignment */
.service-categories .category-title {
    font-size: 1.6rem !important;
    margin: 0 !important;
    color: white !important;
    font-weight: 700 !important;
    text-shadow: 2px 2px 4px rgba(0,0,0,0.3) !important;
    line-height: 1.3 !important;
    word-spacing: 0px !important;
    letter-spacing: 0px !important;
    width: 100% !important;
    display: block !important;
}

/* Force category description alignment */
.service-categories .category-description {
    color: rgba(255, 255, 255, 0.9) !important;
    line-height: 1.5 !important;
    margin-bottom: 25px !important;
    font-size: 1rem !important;
    text-align: center !important;
    word-spacing: 0px !important;
    letter-spacing: 0px !important;
    width: 100% !important;
    display: block !important;
}

/* Force category links container alignment */
.service-categories .category-links {
    margin-top: auto !important;
    width: 100% !important;
}

/* Force all cards links grid */
.service-categories .category-card .category-links {
    display: grid !important;
    grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)) !important;
    gap: 10px !important;
}

/* Force category link alignment */
.service-categories .category-link {
    color: white !important;
    text-decoration: none !important;
    padding: 12px 15px !important;
    border-radius: 8px !important;
    transition: all 0.3s ease !important;
    border: 1.5px solid rgba(255, 255, 255, 0.3) !important;
    font-weight: 500 !important;
    font-size: 0.9rem !important;
    text-align: center !important;
    background: rgba(255, 255, 255, 0.1) !important;
    word-spacing: 0px !important;
    letter-spacing: 0px !important;
    backdrop-filter: blur(5px) !important;
    display: flex !important;
    align-items: center !important;
    justify-content: center !important;
    width: 100% !important;
}

/* Force hover overlay */
.service-categories .hover-overlay {
    position: absolute !important;
    top: 0 !important;
    left: 0 !important;
    width: 100% !important;
    height: 100% !important;
    background: linear-gradient(45deg, rgba(255,255,255,0.1), rgba(255,255,255,0.05)) !important;
    opacity: 0 !important;
    transition: opacity 0.3s ease !important;
    pointer-events: none !important;
}

/* HOVER EFFECTS - FORCE ALL CARDS */
.service-categories .category-card:hover {
    transform: translateY(-8px) scale(1.02) !important;
    box-shadow: 0 20px 50px rgba(0,0,0,0.25) !important;
}

.service-categories .category-card:hover .hover-overlay {
    opacity: 1 !important;
}

.service-categories .category-link:hover {
    background: rgba(255, 255, 255, 0.25) !important;
    transform: translateY(-2px) !important;
    border-color: rgba(255, 255, 255, 0.6) !important;
    box-shadow: 0 4px 15px rgba(255,255,255,0.2) !important;
    color: white !important;
    text-decoration: none !important;
}

/* Creative Animations - FORCE ALL CARDS */
@keyframes float {
    0%, 100% { transform: translateY(0px) !important; }
    50% { transform: translateY(-5px) !important; }
}

.service-categories .category-card {
    animation: float 6s ease-in-out infinite !important;
}

.service-categories .accounting-card {
    animation-delay: 0s !important;
}

.service-categories .tax-card {
    animation-delay: 2s !important;
}

.service-categories .tech-card {
    animation-delay: 4s !important;
}

/* Mobile Responsiveness */
@media (max-width: 1200px) {
    .service-categories .categories-container {
        flex-direction: column !important;
        align-items: center !important;
        gap: 25px !important;
    }
    
    .service-categories .category-card {
        max-width: 100% !important;
        width: 100% !important;
    }
}

@media (max-width: 768px) {
    .service-categories {
        padding: 50px 0 !important;
    }
    
    .service-categories .section-title {
        font-size: 2.2rem !important;
        margin-bottom: 30px !important;
        padding: 0 15px !important;
    }
    
    .service-categories .categories-container {
        gap: 20px !important;
        padding: 0 15px !important;
    }
    
    .service-categories .category-card {
        padding: 25px 20px !important;
        min-width: 280px !important;
        min-height: 450px !important;
    }
    
    .service-categories .category-icon {
        font-size: 2.5rem !important;
        margin-bottom: 12px !important;
    }
    
    .service-categories .category-title {
        font-size: 1.4rem !important;
    }
    
    .service-categories .category-description {
        font-size: 0.95rem !important;
        margin-bottom: 20px !important;
    }
    
    .service-categories .category-card .category-links {
        grid-template-columns: 1fr !important;
    }
    
    .service-categories .category-link {
        padding: 10px 15px !important;
        font-size: 0.9rem !important;
    }
}

@media (max-width: 480px) {
    .service-categories {
        padding: 40px 0 !important;
    }
    
    .service-categories .section-title {
        font-size: 1.8rem !important;
        margin-bottom: 25px !important;
    }
    
    .service-categories .category-card {
        padding: 20px 15px !important;
        min-width: 250px !important;
        min-height: 400px !important;
    }
    
    .service-categories .category-icon {
        font-size: 2.2rem !important;
    }
    
    .service-categories .category-title {
        font-size: 1.3rem !important;
    }
    
    .service-categories .category-description {
        font-size: 0.9rem !important;
        margin-bottom: 15px !important;
    }
    
    .service-categories .category-link {
        padding: 8px 12px !important;
        font-size: 0.85rem !important;
    }
}

/* Touch device optimizations */
@media (hover: none) and (pointer: coarse) {
    .service-categories .category-card:hover {
        transform: none !important;
    }
    
    .service-categories .category-card:hover .hover-overlay {
        opacity: 0 !important;
    }
    
    .service-categories .category-link:hover {
        transform: none !important;
        background: rgba(255, 255, 255, 0.1) !important;
    }
    
    .service-categories .category-card:active {
        transform: scale(0.98) !important;
    }
    
    .service-categories .category-link:active {
        background: rgba(255, 255, 255, 0.2) !important;
        transform: scale(0.95) !important;
    }
    
    /* Disable floating animation on touch devices */
    .service-categories .category-card {
        animation: none !important;
    }
}

/* Reduced motion support */
@media (prefers-reduced-motion: reduce) {
    .service-categories .category-card,
    .service-categories .category-link,
    .service-categories .hover-overlay {
        transition: none !important;
        animation: none !important;
    }
}

/* Ensure no extra space below cards */
.service-categories {
    min-height: fit-content !important;
}

.service-categories .category-card {
    height: fit-content !important;
    min-height: auto !important;
}
</style>

<script>
// ENHANCED INTERACTIVE EFFECTS - FIXED FOR ALL CARDS
document.addEventListener('DOMContentLoaded', function() {
    const categoryCards = document.querySelectorAll('.service-categories .category-card');
    const categoryLinks = document.querySelectorAll('.service-categories .category-link');
    
    console.log('Found category cards:', categoryCards.length);
    console.log('Found category links:', categoryLinks.length);
    
    // Card hover effects with parallax - APPLIED TO ALL CARDS
    categoryCards.forEach(card => {
        console.log('Setting up hover for card:', card.classList.contains('accounting-card') ? 'Accounting' : 
                    card.classList.contains('tax-card') ? 'Tax' : 'Technology');
        
        card.addEventListener('mousemove', function(e) {
            if (window.innerWidth > 768) {
                const rect = this.getBoundingClientRect();
                const x = e.clientX - rect.left;
                const y = e.clientY - rect.top;
                
                const centerX = rect.width / 2;
                const centerY = rect.height / 2;
                
                const rotateY = (x - centerX) / 25;
                const rotateX = (centerY - y) / 25;
                
                this.style.transform = `translateY(-8px) scale(1.02) rotateX(${rotateX}deg) rotateY(${rotateY}deg)`;
                
                // Ensure hover overlay is visible
                const overlay = this.querySelector('.hover-overlay');
                if (overlay) {
                    overlay.style.opacity = '1';
                }
            }
        });
        
        card.addEventListener('mouseleave', function() {
            if (window.innerWidth > 768) {
                this.style.transform = 'translateY(0) scale(1) rotateX(0deg) rotateY(0deg)';
                
                // Hide hover overlay
                const overlay = this.querySelector('.hover-overlay');
                if (overlay) {
                    overlay.style.opacity = '0';
                }
            }
        });
        
        card.addEventListener('mouseenter', function() {
            if (window.innerWidth > 768) {
                const overlay = this.querySelector('.hover-overlay');
                if (overlay) {
                    overlay.style.opacity = '1';
                }
            }
        });
    });
    
    // Link hover effects - APPLIED TO ALL LINKS
    categoryLinks.forEach(link => {
        link.addEventListener('mouseenter', function() {
            if (window.innerWidth > 768) {
                this.style.background = 'rgba(255, 255, 255, 0.3)';
                this.style.transform = 'translateY(-3px)';
                this.style.borderColor = 'rgba(255, 255, 255, 0.7)';
                this.style.boxShadow = '0 6px 20px rgba(255,255,255,0.3)';
            }
        });
        
        link.addEventListener('mouseleave', function() {
            if (window.innerWidth > 768) {
                this.style.background = 'rgba(255, 255, 255, 0.1)';
                this.style.transform = 'translateY(0)';
                this.style.borderColor = 'rgba(255, 255, 255, 0.3)';
                this.style.boxShadow = 'none';
            }
        });
    });
    
    // Scroll animations
    const observerOptions = {
        threshold: 0.1,
        rootMargin: '0px 0px -50px 0px'
    };

    const observer = new IntersectionObserver(function(entries) {
        entries.forEach(entry => {
            if (entry.isIntersecting) {
                entry.target.style.opacity = '1';
                entry.target.style.transform = 'translateY(0) scale(1)';
            }
        });
    }, observerOptions);

    // Animate cards on scroll - APPLIED TO ALL CARDS
    categoryCards.forEach(card => {
        card.style.opacity = '0';
        card.style.transform = 'translateY(30px) scale(0.95)';
        card.style.transition = 'opacity 0.6s ease, transform 0.6s ease';
        observer.observe(card);
    });
    
    console.log('All hover effects and animations initialized for all cards');
});
</script>

    <!-- How We Help -->
<section class="how-we-help" style="padding: 80px 0; background: linear-gradient(135deg, #ffffff 0%, #f8f9fa 100%); width: 100%; position: relative;">
    <div class="container" style="max-width: 100%; margin: 0 auto; padding: 0 20px;">
        <h2 class="section-title" style="text-align: center; font-size: 2.8rem; margin-bottom: 50px; color: #333; font-weight: 800; line-height: 1.2; white-space: nowrap;">How OB Global Can Help You</h2>
        <div class="help-grid" style="display: grid; grid-template-columns: repeat(4, 1fr); gap: 25px; max-width: 1400px; margin: 0 auto;">
            <div class="help-item" style="background: linear-gradient(135deg, #ffd89b, #19547b); color: white; text-align: center; padding: 35px 25px; border-radius: 20px; box-shadow: 0 10px 30px rgba(0,0,0,0.15); transition: all 0.4s ease; border: none; position: relative; overflow: hidden; cursor: pointer;">
                <div class="help-number" style="font-size: 3rem; font-weight: bold; margin-bottom: 20px; opacity: 0.8; text-shadow: 2px 2px 4px rgba(0,0,0,0.3); transition: all 0.3s ease;">01</div>
                <h4 style="font-size: 1.3rem; margin-bottom: 15px; font-weight: 700; text-shadow: 1px 1px 2px rgba(0,0,0,0.3); line-height: 1.3; white-space: nowrap;">üìä Financial Management</h4>
                <p style="line-height: 1.5; font-size: 1rem; margin: 0; word-spacing: 0px; letter-spacing: 0px; text-align: center;">Comprehensive accounting and financial reporting to maintain accuracy and compliance</p>
                <div class="hover-overlay" style="position: absolute; top: 0; left: 0; width: 100%; height: 100%; background: rgba(255,255,255,0.1); opacity: 0; transition: opacity 0.3s ease;"></div>
            </div>
            <div class="help-item" style="background: linear-gradient(135deg, #89f7fe, #66a6ff); color: white; text-align: center; padding: 35px 25px; border-radius: 20px; box-shadow: 0 10px 30px rgba(0,0,0,0.15); transition: all 0.4s ease; border: none; position: relative; overflow: hidden; cursor: pointer;">
                <div class="help-number" style="font-size: 3rem; font-weight: bold; margin-bottom: 20px; opacity: 0.8; text-shadow: 2px 2px 4px rgba(0,0,0,0.3); transition: all 0.3s ease;">02</div>
                <h4 style="font-size: 1.3rem; margin-bottom: 15px; font-weight: 700; text-shadow: 1px 1px 2px rgba(0,0,0,0.3); line-height: 1.3; white-space: nowrap;">üìã Tax Compliance</h4>
                <p style="line-height: 1.5; font-size: 1rem; margin: 0; word-spacing: 0px; letter-spacing: 0px; text-align: center;">End-to-end tax planning, preparation, and compliance management</p>
                <div class="hover-overlay" style="position: absolute; top: 0; left: 0; width: 100%; height: 100%; background: rgba(255,255,255,0.1); opacity: 0; transition: opacity 0.3s ease;"></div>
            </div>
            <div class="help-item" style="background: linear-gradient(135deg, #a8ff78, #78ffd6); color: #333; text-align: center; padding: 35px 25px; border-radius: 20px; box-shadow: 0 10px 30px rgba(0,0,0,0.15); transition: all 0.4s ease; border: none; position: relative; overflow: hidden; cursor: pointer;">
                <div class="help-number" style="font-size: 3rem; font-weight: bold; margin-bottom: 20px; opacity: 0.8; text-shadow: 2px 2px 4px rgba(0,0,0,0.3); transition: all 0.3s ease;">03</div>
                <h4 style="font-size: 1.3rem; margin-bottom: 15px; font-weight: 700; text-shadow: 1px 1px 2px rgba(0,0,0,0.1); line-height: 1.3; white-space: nowrap;">üíª IT Infrastructure</h4>
                <p style="line-height: 1.5; font-size: 1rem; margin: 0; word-spacing: 0px; letter-spacing: 0px; text-align: center;">Complete technology management and cybersecurity protection</p>
                <div class="hover-overlay" style="position: absolute; top: 0; left: 0; width: 100%; height: 100%; background: rgba(255,255,255,0.2); opacity: 0; transition: opacity 0.3s ease;"></div>
            </div>
            <div class="help-item" style="background: linear-gradient(135deg, #fdbb2d, #22c1c3); color: white; text-align: center; padding: 35px 25px; border-radius: 20px; box-shadow: 0 10px 30px rgba(0,0,0,0.15); transition: all 0.4s ease; border: none; position: relative; overflow: hidden; cursor: pointer;">
                <div class="help-number" style="font-size: 3rem; font-weight: bold; margin-bottom: 20px; opacity: 0.8; text-shadow: 2px 2px 4px rgba(0,0,0,0.3); transition: all 0.3s ease;">04</div>
                <h4 style="font-size: 1.3rem; margin-bottom: 15px; font-weight: 700; text-shadow: 1px 1px 2px rgba(0,0,0,0.3); line-height: 1.3; white-space: nowrap;">üöÄ Business Growth</h4>
                <p style="line-height: 1.5; font-size: 1rem; margin: 0; word-spacing: 0px; letter-spacing: 0px; text-align: center;">Strategic insights and operational support to drive sustainable growth</p>
                <div class="hover-overlay" style="position: absolute; top: 0; left: 0; width: 100%; height: 100%; background: rgba(255,255,255,0.1); opacity: 0; transition: opacity 0.3s ease;"></div>
            </div>
        </div>
    </div>
</section>

<style>
/* Mobile Responsiveness */
@media (max-width: 1200px) {
    .help-grid {
        grid-template-columns: repeat(2, 1fr) !important;
        gap: 20px !important;
    }
}

@media (max-width: 768px) {
    .how-we-help {
        padding: 60px 0 !important;
    }
    
    .section-title {
        font-size: 2.2rem !important;
        margin-bottom: 40px !important;
        padding: 0 15px !important;
        white-space: normal !important;
        line-height: 1.3 !important;
    }
    
    .help-grid {
        grid-template-columns: 1fr !important;
        gap: 20px !important;
        padding: 0 15px !important;
    }
    
    .help-item {
        padding: 30px 20px !important;
    }
    
    .help-number {
        font-size: 2.5rem !important;
    }
    
    h4 {
        font-size: 1.2rem !important;
        white-space: normal !important;
        line-height: 1.4 !important;
    }
    
    p {
        font-size: 0.95rem !important;
        line-height: 1.5 !important;
    }
}

@media (max-width: 480px) {
    .how-we-help {
        padding: 50px 0 !important;
    }
    
    .section-title {
        font-size: 1.8rem !important;
        margin-bottom: 30px !important;
    }
    
    .help-item {
        padding: 25px 15px !important;
    }
    
    .help-number {
        font-size: 2.2rem !important;
    }
    
    h4 {
        font-size: 1.1rem !important;
    }
    
    p {
        font-size: 0.9rem !important;
    }
}

/* Hover Effects */
.help-item:hover {
    transform: translateY(-10px) scale(1.02) !important;
    box-shadow: 0 20px 50px rgba(0,0,0,0.25) !important;
}

.help-item:hover .help-number {
    transform: scale(1.1) !important;
    opacity: 1 !important;
}

.help-item:hover .hover-overlay {
    opacity: 1 !important;
}

/* Text spacing fixes */
.help-item p {
    word-spacing: 0px !important;
    letter-spacing: 0px !important;
    text-align: center !important;
}

.help-item h4 {
    word-spacing: 0px !important;
    letter-spacing: 0px !important;
}

/* Touch device optimizations */
@media (hover: none) and (pointer: coarse) {
    .help-item:hover {
        transform: none !important;
    }
    
    .help-item:hover .help-number {
        transform: none !important;
    }
    
    .help-item:hover .hover-overlay {
        opacity: 0 !important;
    }
    
    .help-item:active {
        transform: scale(0.98) !important;
    }
}

/* Reduced motion support */
@media (prefers-reduced-motion: reduce) {
    .help-item,
    .help-number,
    .hover-overlay {
        transition: none !important;
    }
}
</style>

<script>
// Enhanced hover effects with JavaScript
document.addEventListener('DOMContentLoaded', function() {
    const helpItems = document.querySelectorAll('.help-item');
    
    helpItems.forEach(item => {
        // Add click event for mobile devices
        item.addEventListener('click', function() {
            if (window.innerWidth <= 768) {
                this.classList.toggle('active');
            }
        });
        
        // Enhanced hover effects
        item.addEventListener('mouseenter', function() {
            if (window.innerWidth > 768) {
                this.style.transform = 'translateY(-12px) scale(1.03)';
                this.style.boxShadow = '0 25px 60px rgba(0,0,0,0.3)';
                const number = this.querySelector('.help-number');
                if (number) {
                    number.style.transform = 'scale(1.15)';
                    number.style.opacity = '1';
                }
                const overlay = this.querySelector('.hover-overlay');
                if (overlay) {
                    overlay.style.opacity = '1';
                }
            }
        });
        
        item.addEventListener('mouseleave', function() {
            if (window.innerWidth > 768) {
                this.style.transform = 'translateY(0) scale(1)';
                this.style.boxShadow = '0 10px 30px rgba(0,0,0,0.15)';
                const number = this.querySelector('.help-number');
                if (number) {
                    number.style.transform = 'scale(1)';
                    number.style.opacity = '0.8';
                }
                const overlay = this.querySelector('.hover-overlay');
                if (overlay) {
                    overlay.style.opacity = '0';
                }
            }
        });
    });
    
    // Add intersection observer for scroll animations
    const observerOptions = {
        threshold: 0.1,
        rootMargin: '0px 0px -50px 0px'
    };

    const observer = new IntersectionObserver(function(entries) {
        entries.forEach(entry => {
            if (entry.isIntersecting) {
                entry.target.style.opacity = '1';
                entry.target.style.transform = 'translateY(0)';
            }
        });
    }, observerOptions);

    // Animate help items on scroll
    const animatedElements = document.querySelectorAll('.help-item');
    animatedElements.forEach(element => {
        element.style.opacity = '0';
        element.style.transform = 'translateY(30px)';
        element.style.transition = 'opacity 0.6s ease, transform 0.6s ease';
        observer.observe(element);
    });
});
</script>
</div>

<!-- Staff Modal -->
<div id="staffModal" class="modal">
    <div class="modal-content">
        <span class="close-modal">&times;</span>
        <div id="modalContent"></div>
    </div>
</div>
{% endblock %}

{% block extra_css %}
<style>
/* Reset and Base Styles */
* {
    margin: 0;
    padding: 0;
    box-sizing: border-box;
}

html, body {
    width: 100%;
    height: 100%;
    overflow-x: hidden;
}

/* Base Container - Full Width */
.service-page-container {
    width: 100%;
    margin: 0;
    padding: 0;
    overflow-x: hidden;
}

 /* Hero Section - Full Viewport */
.service-hero {
    position: relative;
    color: white;
    padding: 0;
    text-align: center;
    margin-bottom: 0;
    width: 100%;
    height: 100vh;
    min-height: 100vh;
    display: flex;
    align-items: center;
    justify-content: center;
    overflow: hidden;
}

.hero-background {
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background-image: url('https://i.pinimg.com/1200x/99/09/90/990990ea460832b723d305483c35a93f.jpg');
      background-size: cover;
    background-position: center;
    background-blend-mode: overlay;
    background-attachment: scroll;
    background-repeat: no-repeat;
    z-index: -1;
}

/* Mobile-specific hero background fix */
@media (max-width: 768px) {
    .hero-background {
        background-attachment: scroll !important;
        position: fixed;
        background-size: cover;
        background-position: center center;
    }
    
    .service-hero {
        position: relative;
    }
}

.hero-content {
    position: relative;
    z-index: 2;
    max-width: 800px;
    padding: 0 20px;
}

.hero-title {
    font-size: 4rem;
    margin-bottom: 30px;
    font-weight: 800;
    line-height: 1.1;
    text-shadow: 3px 3px 10px rgba(0,0,0,0.7);
    animation: fadeInUp 1s ease-out;
}

.hero-description {
    font-size: 1.4rem;
    margin: 0 auto;
    line-height: 1.7;
    opacity: 0.95;
    text-shadow: 2px 2px 5px rgba(0,0,0,0.5);
    animation: fadeInUp 1s ease-out 0.3s both;
}

@keyframes fadeInUp {
    from {
        opacity: 0;
        transform: translateY(30px);
    }
    to {
        opacity: 1;
        transform: translateY(0);
    }
}

/* Staff Section */
.staff-section {
    padding: 80px 0;
    background: linear-gradient(135deg, #f8f9fa 0%, #e9ecef 100%);
    width: 100%;
}

.section-title {
    text-align: center;
    font-size: 2.8rem;
    margin-bottom: 50px;
    color: #333;
    font-weight: 800;
}

/* Staff Grid - 4 Columns on Large Screens */
.staff-grid {
    display: grid;
    grid-template-columns: repeat(4, 1fr);
    gap: 30px;
    margin-bottom: 40px;
    max-width: 1400px;
    margin-left: auto;
    margin-right: auto;
    padding: 0 20px;
}

/* Compact Staff Card Design */
.staff-card {
    background: white;
    border-radius: 20px;
    overflow: hidden;
    box-shadow: 0 10px 30px rgba(0,0,0,0.15);
    transition: all 0.4s ease;
    position: relative;
    border: none;
}

.staff-card:hover {
    transform: translateY(-10px) scale(1.02);
    box-shadow: 0 20px 50px rgba(0,0,0,0.25);
}

/* Staff Image Container */
.staff-image-container {
    position: relative;
    height: 220px;
    overflow: hidden;
    background: linear-gradient(135deg, #667eea, #764ba2);
}

.staff-image {
    width: 100%;
    height: 100%;
    object-fit: cover;
    transition: all 0.4s ease;
}

.staff-placeholder {
    width: 100%;
    height: 100%;
    background: linear-gradient(135deg, #667eea, #764ba2);
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 3.5rem;
    color: rgba(255, 255, 255, 0.9);
}

.staff-card:hover .staff-image {
    transform: scale(1.1);
}

/* Staff Overlay with Social Links */
.staff-overlay {
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    background: linear-gradient(to bottom, transparent 40%, rgba(0,0,0,0.8));
    display: flex;
    align-items: flex-end;
    justify-content: center;
    opacity: 0;
    transition: all 0.3s ease;
    padding: 20px;
}

.staff-card:hover .staff-overlay {
    opacity: 1;
}

.staff-social {
    display: flex;
    gap: 10px;
    transform: translateY(20px);
    transition: transform 0.3s ease;
}

.staff-card:hover .staff-social {
    transform: translateY(0);
}

.social-link {
    width: 40px;
    height: 40px;
    background: rgba(255, 255, 255, 0.95);
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
    color: #333;
    text-decoration: none;
    transition: all 0.3s ease;
    backdrop-filter: blur(10px);
    font-size: 1rem;
    box-shadow: 0 4px 15px rgba(0,0,0,0.2);
}

.social-link:hover {
    transform: scale(1.2);
    background: #007bff;
    color: white;
}

.social-link.linkedin:hover {
    background: #0077b5;
}

.social-link.email:hover {
    background: #ea4335;
}

/* Staff Info */
.staff-info {
    padding: 25px;
    text-align: center;
    background: white;
}

.staff-name {
    font-size: 1.2rem;
    font-weight: 700;
    margin-bottom: 8px;
    color: #333;
    line-height: 1.3;
    word-break: break-word;
}

.staff-position {
    color: #007bff;
    font-weight: 600;
    margin-bottom: 10px;
    font-size: 0.95rem;
    word-break: break-word;
}

.staff-office {
    color: #666;
    font-size: 0.85rem;
    margin-bottom: 20px;
    display: flex;
    align-items: center;
    justify-content: center;
    gap: 8px;
    word-break: break-word;
}

.staff-office i {
    color: #007bff;
    font-size: 0.8rem;
}

/* View More Button */
.btn-view-more {
    background: linear-gradient(135deg, #007bff, #0056b3);
    color: white;
    border: none;
    padding: 12px 24px;
    border-radius: 25px;
    font-weight: 600;
    cursor: pointer;
    transition: all 0.3s ease;
    display: inline-flex;
    align-items: center;
    gap: 8px;
    text-decoration: none;
    font-size: 0.9rem;
    min-width: 140px;
    justify-content: center;
    box-shadow: 0 4px 15px rgba(0,123,255,0.3);
}

.btn-view-more:hover {
    transform: translateY(-3px);
    box-shadow: 0 8px 25px rgba(0,123,255,0.4);
    color: white;
}

/* No Staff State */
.no-staff {
    grid-column: 1 / -1;
    text-align: center;
    padding: 60px 20px;
    color: #666;
}

.no-staff i {
    margin-bottom: 20px;
    color: #ccc;
}

.no-staff p {
    font-size: 1.1rem;
    margin: 0;
}

/* Service Overview */
.service-overview {
    padding: 80px 0;
    background: linear-gradient(135deg, #ffffff 0%, #f8f9fa 100%);
    width: 100%;
}

.overview-content {
    max-width: 1200px;
    margin: 0 auto;
    padding: 0 20px;
    text-align: center;
}

.overview-text {
    font-size: 1.1rem;
    line-height: 1.7;
    color: #555;
    margin-bottom: 50px;
    max-width: 900px;
    margin-left: auto;
    margin-right: auto;
    text-align: justify;
    text-justify: inter-word;
}

.service-highlights {
    display: grid;
    grid-template-columns: repeat(3, 1fr);
    gap: 30px;
    max-width: 1200px;
    margin: 0 auto;
}

.highlight-item {
    text-align: center;
    padding: 40px 25px;
    border-radius: 20px;
    transition: all 0.4s ease;
    color: white;
    box-shadow: 0 10px 30px rgba(0,0,0,0.15);
}

.highlight-item:hover {
    transform: translateY(-10px) scale(1.05);
    box-shadow: 0 20px 50px rgba(0,0,0,0.25);
}

.highlight-icon {
    width: 80px;
    height: 80px;
    background: rgba(255, 255, 255, 0.2);
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
    margin: 0 auto 20px;
    color: white;
    font-size: 2rem;
    backdrop-filter: blur(10px);
}

.highlight-item h4 {
    margin-bottom: 15px;
    color: white;
    font-size: 1.3rem;
    font-weight: 700;
}

.highlight-item p {
    color: rgba(255, 255, 255, 0.9);
    line-height: 1.6;
    font-size: 1rem;
}

/* Service Categories */
.service-categories {
    padding: 80px 0;
    background: linear-gradient(135deg, #f8f9fa 0%, #e9ecef 100%);
    width: 100%;
}

.categories-grid {
    display: grid;
    grid-template-columns: repeat(2, 1fr);
    gap: 40px;
    max-width: 1200px;
    margin: 0 auto;
    padding: 0 20px;
}

.category-card {
    padding: 40px 30px;
    border-radius: 25px;
    text-align: center;
    box-shadow: 0 15px 40px rgba(0,0,0,0.2);
    transition: all 0.4s ease;
    border: none;
}

.category-card:hover {
    transform: translateY(-10px) scale(1.02);
    box-shadow: 0 25px 60px rgba(0,0,0,0.3);
}

.category-icon {
    font-size: 3.5rem;
    color: rgba(255, 255, 255, 0.9);
    margin-bottom: 25px;
    text-shadow: 2px 2px 4px rgba(0,0,0,0.3);
}

.category-title {
    font-size: 1.5rem;
    margin-bottom: 20px;
    color: white;
    font-weight: 700;
    text-shadow: 2px 2px 4px rgba(0,0,0,0.3);
}

.category-description {
    color: rgba(255, 255, 255, 0.9);
    line-height: 1.6;
    margin-bottom: 30px;
    font-size: 1rem;
    text-align: justify;
    text-justify: inter-word;
}

.category-links {
    display: flex;
    flex-direction: column;
    gap: 12px;
}

.category-link {
    color: white;
    text-decoration: none;
    padding: 15px 20px;
    border-radius: 12px;
    transition: all 0.3s ease;
    border: 2px solid rgba(255, 255, 255, 0.3);
    font-weight: 600;
    font-size: 1rem;
    text-align: center;
    backdrop-filter: blur(10px);
    background: rgba(255, 255, 255, 0.1);
}

.category-link:hover {
    background: rgba(255, 255, 255, 0.2);
    color: white;
    text-decoration: none;
    transform: translateX(8px);
    border-color: rgba(255, 255, 255, 0.5);
}

/* How We Help */
.how-we-help {
    padding: 80px 0;
    background: linear-gradient(135deg, #ffffff 0%, #f8f9fa 100%);
    width: 100%;
}

.help-grid {
    display: grid;
    grid-template-columns: repeat(4, 1fr);
    gap: 30px;
    max-width: 1400px;
    margin: 0 auto;
    padding: 0 20px;
}

.help-item {
    text-align: center;
    padding: 40px 25px;
    border-radius: 20px;
    box-shadow: 0 10px 30px rgba(0,0,0,0.15);
    transition: all 0.4s ease;
    border: none;
}

.help-item:hover {
    transform: translateY(-10px) scale(1.05);
    box-shadow: 0 20px 50px rgba(0,0,0,0.25);
}

.help-number {
    font-size: 3rem;
    font-weight: bold;
    margin-bottom: 20px;
    opacity: 0.8;
    text-shadow: 2px 2px 4px rgba(0,0,0,0.3);
}

.help-item h4 {
    font-size: 1.3rem;
    margin-bottom: 15px;
    font-weight: 700;
    text-shadow: 1px 1px 2px rgba(0,0,0,0.3);
}

.help-item p {
    line-height: 1.6;
    font-size: 1rem;
    text-align: justify;
    text-justify: inter-word;
}

/* Modal Styles */
.modal {
    display: none;
    position: fixed;
    z-index: 10000;
    left: 0;
    top: 0;
    width: 100%;
    height: 100%;
    background-color: rgba(0,0,0,0.8);
    backdrop-filter: blur(10px);
}

.modal-content {
    background: linear-gradient(135deg, #667eea, #764ba2);
    margin: 5% auto;
    padding: 30px;
    border-radius: 25px;
    width: 90%;
    max-width: 500px;
    position: relative;
    box-shadow: 0 25px 60px rgba(0,0,0,0.4);
    animation: modalSlideIn 0.4s ease-out;
    color: white;
}

@keyframes modalSlideIn {
    from {
        opacity: 0;
        transform: translateY(-50px) scale(0.9);
    }
    to {
        opacity: 1;
        transform: translateY(0) scale(1);
    }
}

.close-modal {
    position: absolute;
    right: 20px;
    top: 15px;
    font-size: 28px;
    font-weight: bold;
    cursor: pointer;
    color: rgba(255, 255, 255, 0.8);
    transition: all 0.3s ease;
    z-index: 10001;
    width: 40px;
    height: 40px;
    display: flex;
    align-items: center;
    justify-content: center;
    border-radius: 50%;
    background: rgba(255, 255, 255, 0.1);
}

.close-modal:hover {
    color: white;
    background: rgba(255, 255, 255, 0.2);
    transform: scale(1.1);
}

.staff-modal-content {
    text-align: center;
}

.staff-modal-image {
    width: 140px;
    height: 140px;
    border-radius: 50%;
    object-fit: cover;
    margin-bottom: 20px;
    border: 4px solid rgba(255, 255, 255, 0.8);
    box-shadow: 0 10px 30px rgba(0,0,0,0.3);
}

.staff-modal-placeholder {
    width: 140px;
    height: 140px;
    border-radius: 50%;
    background: linear-gradient(135deg, rgba(255,255,255,0.2), rgba(255,255,255,0.1));
    display: flex;
    align-items: center;
    justify-content: center;
    margin: 0 auto 20px;
    font-size: 3.5rem;
    color: rgba(255, 255, 255, 0.7);
    border: 4px solid rgba(255, 255, 255, 0.8);
}

.staff-modal-name {
    font-size: 1.5rem;
    font-weight: 700;
    margin-bottom: 10px;
    color: white;
    word-break: break-word;
    text-shadow: 2px 2px 4px rgba(0,0,0,0.3);
}

.staff-modal-position {
    color: rgba(255, 255, 255, 0.9);
    margin-bottom: 25px;
    font-size: 1.1rem;
    word-break: break-word;
    font-weight: 600;
}

.staff-modal-details {
    text-align: left;
    margin-top: 25px;
    background: rgba(255, 255, 255, 0.1);
    padding: 25px;
    border-radius: 15px;
    backdrop-filter: blur(10px);
    border: 1px solid rgba(255, 255, 255, 0.2);
}

.detail-row {
    display: flex;
    justify-content: space-between;
    margin-bottom: 15px;
    padding-bottom: 15px;
    border-bottom: 1px solid rgba(255, 255, 255, 0.3);
    align-items: flex-start;
    gap: 15px;
}

.detail-row:last-child {
    margin-bottom: 0;
    padding-bottom: 0;
    border-bottom: none;
}

.detail-label {
    font-weight: 700;
    color: rgba(255, 255, 255, 0.9);
    flex: 1;
    font-size: 0.95rem;
    min-width: 120px;
}

.detail-value {
    color: white;
    flex: 2;
    text-align: right;
    word-wrap: break-word;
    word-break: break-word;
    font-size: 0.95rem;
    line-height: 1.5;
    font-weight: 600;
}

.detail-value a {
    color: #ffeb3b;
    text-decoration: none;
    font-weight: 700;
}

.detail-value a:hover {
    text-decoration: underline;
    color: #fff176;
}

/* Container */
.container {
    max-width: 100%;
    margin: 0 auto;
    padding: 0 20px;
}

/* Enhanced Mobile Responsiveness */
@media (max-width: 1200px) {
    .staff-grid {
        grid-template-columns: repeat(3, 1fr);
        gap: 25px;
    }
    
    .help-grid {
        grid-template-columns: repeat(2, 1fr);
        gap: 25px;
    }
    
    .service-highlights {
        grid-template-columns: repeat(2, 1fr);
    }
}

@media (max-width: 992px) {
    .staff-grid {
        grid-template-columns: repeat(2, 1fr);
    }
    
    .categories-grid {
        grid-template-columns: 1fr;
        gap: 30px;
    }
    
    .service-highlights {
        grid-template-columns: 1fr;
        gap: 25px;
    }
}

@media (max-width: 768px) {
    .service-page-container {
        padding: 0;
    }

    .service-hero {
        height: 100vh;
        min-height: 100vh;
        padding: 0 15px;
    }

    .hero-title {
        font-size: 2.5rem;
    }
    
    .hero-description {
        font-size: 1.1rem;
    }
    
    .section-title {
        font-size: 2rem;
        margin-bottom: 30px;
    }
    
    .staff-grid {
        grid-template-columns: 1fr;
        gap: 25px;
        padding: 0 15px;
    }
    
    .staff-card {
        max-width: 400px;
        margin: 0 auto;
    }
    
    .help-grid {
        grid-template-columns: 1fr;
        gap: 20px;
        padding: 0 15px;
    }
    
    .modal-content {
        margin: 10% auto;
        padding: 25px;
        width: 95%;
    }
    
    .detail-row {
        flex-direction: column;
        text-align: center;
        gap: 8px;
    }
    
    .detail-value {
        text-align: center;
    }
    
    .staff-modal-image,
    .staff-modal-placeholder {
        width: 120px;
        height: 120px;
    }
}

@media (max-width: 480px) {
    .service-hero {
        height: 100vh;
        min-height: 100vh;
        padding: 0 10px;
    }

    .hero-title {
        font-size: 2rem;
    }
    
    .hero-description {
        font-size: 1rem;
    }
    
    .section-title {
        font-size: 1.6rem;
    }
    
    .staff-section,
    .service-overview,
    .service-categories,
    .how-we-help {
        padding: 50px 0;
    }
    
    .staff-card {
        max-width: 100%;
    }
    
    .staff-info {
        padding: 20px;
    }
    
    .highlight-item {
        padding: 30px 20px;
    }
    
    .help-item {
        padding: 30px 20px;
    }
    
    .help-number {
        font-size: 2.5rem;
    }
    
    .category-icon {
        font-size: 3rem;
    }
    
    .category-title {
        font-size: 1.3rem;
    }
    
    .category-card {
        padding: 30px 20px;
    }
}

/* Large Desktop Screens - Full Width Utilization */
@media (min-width: 1400px) {
    .staff-grid {
        grid-template-columns: repeat(4, 1fr);
        max-width: 1400px;
    }
    
    .categories-grid {
        max-width: 1200px;
    }
    
    .help-grid {
        max-width: 1200px;
    }
}

/* Ultra-wide screens */
@media (min-width: 2000px) {
    .staff-grid {
        grid-template-columns: repeat(5, 1fr);
        max-width: 1800px;
    }
    
    .categories-grid {
        max-width: 1400px;
    }
    
    .help-grid {
        max-width: 1400px;
    }
}

/* Touch device optimizations */
@media (hover: none) and (pointer: coarse) {
    .staff-card:hover {
        transform: none;
    }
    
    .staff-overlay {
        opacity: 1;
    }
    
    .staff-social {
        transform: translateY(0);
    }
    
    .category-card:hover,
    .help-item:hover,
    .highlight-item:hover {
        transform: none;
    }
}

/* Reduced motion support */
@media (prefers-reduced-motion: reduce) {
    .staff-card,
    .category-card,
    .help-item,
    .highlight-item,
    .btn-view-more {
        transition: none;
    }
    
    .modal-content {
        animation: none;
    }
    
    .staff-card:hover .staff-image {
        transform: none;
    }
}

/* Dark mode support */
@media (prefers-color-scheme: dark) {
    .staff-section,
    .service-categories {
        background: linear-gradient(135deg, #1a1a1a 0%, #2d2d2d 100%);
    }
    
    .service-overview,
    .how-we-help {
        background: linear-gradient(135deg, #2d2d2d 0%, #1a1a1a 100%);
    }
    
    .staff-card {
        background: #2d2d2d;
    }
    
    .staff-info {
        background: #2d2d2d;
    }
    
    .staff-name,
    .category-title,
    .help-item h4,
    .highlight-item h4 {
        color: white;
    }
    
    .staff-position,
    .category-description,
    .help-item p,
    .highlight-item p {
        color: #ccc;
    }
}
</style>
{% endblock %}

{% block extra_js %}
<script>
// Store staff data for modal access
let staffDataCache = {};

function handleImageError(img) {
    console.log('Image failed to load, using fallback for staff ID:', img.dataset.staffId);
    const fallbackSrc = '{% static 'images/team-placeholder.jpg' %}';
    if (img.src !== fallbackSrc) {
        img.src = fallbackSrc;
    }
}

function openStaffModal(staffId) {
    // Show loading state
    const modalContent = document.getElementById('modalContent');
    modalContent.innerHTML = `
        <div class="text-center p-4">
            <div class="spinner-border text-warning" style="width: 3rem; height: 3rem;" role="status">
                <span class="visually-hidden">Loading...</span>
            </div>
            <p class="mt-3 text-white">Loading staff details...</p>
        </div>
    `;
    document.getElementById('staffModal').style.display = 'block';

    // Check if we have cached data
    if (staffDataCache[staffId]) {
        displayStaffModal(staffDataCache[staffId]);
        return;
    }

    fetch(`/api/staff/${staffId}/`)
        .then(response => {
            if (!response.ok) {
                throw new Error('Network response was not ok');
            }
            return response.json();
        })
        .then(data => {
            // Cache the data
            staffDataCache[staffId] = data;
            displayStaffModal(data);
        })
        .catch(error => {
            console.error('Error fetching staff details:', error);
            modalContent.innerHTML = `
                <div class="text-center p-4">
                    <i class="fas fa-exclamation-triangle fa-3x text-warning mb-3"></i>
                    <h4 class="text-white">Error Loading Profile</h4>
                    <p class="text-white">Unable to load staff details. Please try again.</p>
                    <button class="btn-view-more mt-3" onclick="openStaffModal(${staffId})">
                        <span>üîÑ Retry</span>
                        <i class="fas fa-redo"></i>
                    </button>
                </div>
            `;
        });
}

function displayStaffModal(data) {
    const modalContent = document.getElementById('modalContent');
    
    // Get the actual image URL from the card if available
    const staffCard = document.querySelector(`.staff-image[data-staff-id="${data.id}"]`);
    let profileImageUrl = data.profile_image;
    
    // If we have a card with the image, use that URL (it's already optimized)
    if (staffCard && staffCard.src && !staffCard.src.includes('team-placeholder')) {
        profileImageUrl = staffCard.src;
    } else if (data.profile_image) {
        // Apply the same Cloudinary optimization as in the template
        profileImageUrl = data.profile_image.replace('/upload/', '/upload/q_auto,f_auto/');
    }

    modalContent.innerHTML = `
        <div class="staff-modal-content">
            ${profileImageUrl ? 
                `<img src="${profileImageUrl}" 
                      alt="${data.first_name} ${data.last_name}" 
                      class="staff-modal-image"
                      onerror="this.onerror=null; this.src='{% static 'images/team-placeholder.jpg' %}'">` :
                `<div class="staff-modal-placeholder"><i class="fas fa-user-circle"></i></div>`
            }
            <h3 class="staff-modal-name">${data.first_name} ${data.last_name}</h3>
            <p class="staff-modal-position">üéØ ${data.field_position || 'Managed Services Specialist'}</p>
            
            <div class="staff-modal-details">
                <div class="detail-row">
                    <span class="detail-label">üìß Email:</span>
                    <span class="detail-value">${data.email}</span>
                </div>
                
                ${data.office_location ? `
                <div class="detail-row">
                    <span class="detail-label">üè¢ Office:</span>
                    <span class="detail-value">${data.office_location}</span>
                </div>` : ''}
                ${data.address ? `
                <div class="detail-row">
                    <span class="detail-label">üìç Address:</span>
                    <span class="detail-value">${data.address}</span>
                </div>` : ''}
                ${data.nationality ? `
                <div class="detail-row">
                    <span class="detail-label">üåç Nationality:</span>
                    <span class="detail-value">${data.nationality}</span>
                </div>` : ''}
                ${data.linkedin ? `
                <div class="detail-row">
                    <span class="detail-label">üíº LinkedIn:</span>
                    <span class="detail-value"><a href="${data.linkedin}" target="_blank">View Profile</a></span>
                </div>` : ''}
                ${data.company_impact ? `
                <div class="detail-row">
                    <span class="detail-label">üöÄ Company Impact:</span>
                    <span class="detail-value">${data.company_impact}</span>
                </div>` : ''}
                ${data.office_impact ? `
                <div class="detail-row">
                    <span class="detail-label">üí´ Office Impact:</span>
                    <span class="detail-value">${data.office_impact}</span>
                </div>` : ''}
                ${data.field_position ? `
                <div class="detail-row">
                    <span class="detail-label">üéØ Field Position:</span>
                    <span class="detail-value">${data.field_position}</span>
                </div>` : ''}
                ${data.executive_position_description ? `
                <div class="detail-row">
                    <span class="detail-label">üëë Executive Position:</span>
                    <span class="detail-value">${data.executive_position_description}</span>
                </div>` : ''}
            </div>
        </div>
    `;
    
    // Add escape key listener
    document.addEventListener('keydown', handleEscapeKey);
}

function handleEscapeKey(event) {
    if (event.key === 'Escape') {
        closeStaffModal();
    }
}

function closeStaffModal() {
    document.getElementById('staffModal').style.display = 'none';
    document.removeEventListener('keydown', handleEscapeKey);
}

// Close modal when clicking the X
document.querySelector('.close-modal').onclick = closeStaffModal;

// Close modal when clicking outside
window.onclick = function(event) {
    const modal = document.getElementById('staffModal');
    if (event.target == modal) {
        closeStaffModal();
    }
}

// Enhanced image optimization and error handling
document.addEventListener('DOMContentLoaded', function() {
    const staffImages = document.querySelectorAll('.staff-image');
    staffImages.forEach(img => {
        // Add loading state
        img.style.opacity = '0';
        img.style.transition = 'opacity 0.3s ease';
        
        img.addEventListener('load', function() {
            this.style.opacity = '1';
            console.log('Image loaded successfully for staff ID:', this.dataset.staffId);
        });
        
        img.addEventListener('error', function() {
            console.log('Image failed to load, using fallback for staff ID:', this.dataset.staffId);
            const fallbackSrc = '{% static 'images/team-placeholder.jpg' %}';
            if (this.src !== fallbackSrc) {
                this.src = fallbackSrc;
            }
            this.style.opacity = '1';
        });
        
        // Trigger load in case image is already cached
        if (img.complete) {
            img.style.opacity = '1';
        }
    });

    // Button loading states
    const viewMoreButtons = document.querySelectorAll('.btn-view-more');
    viewMoreButtons.forEach(button => {
        button.addEventListener('click', function() {
            const originalHTML = this.innerHTML;
            this.innerHTML = '<i class="fas fa-spinner fa-spin"></i> Loading...';
            this.disabled = true;
            
            // Reset button after 5 seconds if something goes wrong
            setTimeout(() => {
                this.innerHTML = originalHTML;
                this.disabled = false;
            }, 5000);
        });
    });

    // Add intersection observer for lazy loading animations
    const observerOptions = {
        threshold: 0.05,
        rootMargin: '0px 0px -50px 0px'
    };

    const observer = new IntersectionObserver(function(entries) {
        entries.forEach(entry => {
            if (entry.isIntersecting) {
                entry.target.style.opacity = '1';
                entry.target.style.transform = 'translateY(0)';
            }
        });
    }, observerOptions);

    // Animate elements on scroll
    const animatedElements = document.querySelectorAll('.staff-card, .category-card, .help-item, .highlight-item');
    animatedElements.forEach(element => {
        element.style.opacity = '0';
        element.style.transform = 'translateY(30px)';
        element.style.transition = 'opacity 0.6s ease, transform 0.6s ease';
        observer.observe(element);
    });

    // Force hero section to be full screen
    function setHeroFullScreen() {
        const hero = document.querySelector('.service-hero');
        if (hero) {
            hero.style.height = '100vh';
            hero.style.minHeight = '100vh';
        }
    }

    setHeroFullScreen();
    window.addEventListener('resize', setHeroFullScreen);
});

// Performance optimization: Debounce scroll events
let scrollTimeout;
window.addEventListener('scroll', function() {
    if (scrollTimeout) {
        clearTimeout(scrollTimeout);
    }
    scrollTimeout = setTimeout(function() {
        // Handle scroll-based animations if needed
    }, 100);
});
</script>
{% endblock %}